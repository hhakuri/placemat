log stderr all;
ipv4 table outertab;
protocol device {
    scan time 60;
}
protocol direct singles {
    ipv4 {
        table outertab;
    };
    interface "node0";
}
protocol bfd {
}
protocol static defaultgw {
    ipv4;
    route 0.0.0.0/0 via 10.0.0.1;
}
protocol kernel {
    merge paths;
    ipv4 {
        export filter {
            if source = RTS_DEVICE then reject;
            accept;
        };
    };
}
template bgp bgpspine {
    local as 64598;
    bfd;

    ipv4 {
        table outertab;
        import all;
        export all;
        next hop self;
    };
}
protocol bgp 'spine1' from bgpspine {
    neighbor 10.0.0.3 as 64599;
}
protocol bgp 'spine2' from bgpspine {
    neighbor 10.0.0.4 as 64599;
}
protocol pipe outerroutes {
    table master4;
    peer table outertab;
    import all;
    export none;
}
